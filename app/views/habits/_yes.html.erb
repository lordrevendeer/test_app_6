<% @habit.ydays = @habit.ydays + 1  %>
<% @habit.save %>

<% if @habit.frequency == "Daily" %>
    <% @stat = Stat.new %>
    <% @stat.done = true %>
    <% @stat.habit_id = @habit.id %>
    <% @stat.dates =  DateTime.now.strftime "%d/%m/%y"%>
    <% @stat.save %>
<% end %>

<% if @habit.frequency == "Monthly" %>
    <% count = 0 %>
    <% m = DateTime.now.strftime "%m/%y" %>
    <% Stat.where(habit_id: @habit.id).each do |stat| %>
        <% if (stat.dates.strftime "%m/%y") == m %>
            <% count = 1 %>
        <% end %>   
    <% end %>
    <% if count == 0 %>
        <% @stat = Stat.new %>
        <% @stat.done = true %>
        <% @stat.habit_id = @habit.id %>
        <% @stat.dates =  DateTime.now.strftime "%d/%m/%y"%>
        <% @stat.save %>
    <% end %>
<% end %>

<% if @habit.frequency == "Yearly" %>
    <% count = 0 %>
    <% y = DateTime.now.strftime "%y" %>
    <% Stat.where(habit_id: @habit.id).each do |stat| %>
        <% if (stat.dates.strftime "%y") == y %>
            <% count = 1 %>
        <% end %>   
    <% end %>
    <% if count == 0 %>
        <% @stat = Stat.new %>
        <% @stat.done = true %>
        <% @stat.habit_id = @habit.id %>
        <% @stat.dates =  DateTime.now.strftime "%d/%m/%y"%>
        <% @stat.save %>
    <% end %>
<% end %>