<% if @habit.frequency == "Daily" || @habit.frequency == "Weekly" %>
    <% @stat = Stat.new %>
    <% @stat.done = true %>
    <% @stat.habit_id = @habit.id %>
    <% @stat.times =  DateTime.now %>
    <% @stat.save %>
<% end %>

<% if @habit.frequency == "Monthly" %>
    <% count = 0 %>
    <% m = DateTime.now.strftime "%m/%y" %>
    <% Stat.where(habit_id: @habit.id).each do |stat| %>
        <% if (stat.times.strftime "%m/%y") == m %>
            <% count = 1 %>
        <% end %>   
    <% end %>
    <% if count == 0 %>
        <% @stat = Stat.new %>
        <% @stat.done = true %>
        <% @stat.habit_id = @habit.id %>
        <% @stat.times =  DateTime.now %>
        <% @stat.save %>
    <% end %>
<% end %>

<% if @habit.frequency == "Yearly" %>
    <% count = 0 %>
    <% y = DateTime.now.strftime "%y" %>
    <% Stat.where(habit_id: @habit.id).each do |stat| %>
        <% if (stat.times.strftime "%y") == y %>
            <% count = 1 %>
        <% end %>   
    <% end %>
    <% if count == 0 %>
        <% @stat = Stat.new %>
        <% @stat.done = true %>
        <% @stat.habit_id = @habit.id %>
        <% @stat.times =  DateTime.now %>
        <% @stat.save %>
    <% end %>
<% end %>